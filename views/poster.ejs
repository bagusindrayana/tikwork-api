<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Poster - <%- job.job_title %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <% /* Configuration and Variable Pre-computation */ var p=config.palette; var show=config.show; var
        themeName=config.theme; var titleLength=config.titleLength || 'medium' ; var titleSizes={ 'short' : '2.5rem'
        , 'medium' : '2rem' , 'long' : '1.65rem' , 'super-long' : '1.35rem' }; var titleSize=titleSizes[titleLength]
        || '2rem' ; var isLightBg=['minimalist','pastel','magazine'].includes(themeName) || (themeName==='monochrome' &&
        p.bg1==='#fff' ); /* Pre-compute alpha colors to avoid EJS tag mismatching with hex codes in CSS */ var
        accent11=p.accent + '11' ; var accent22=p.accent + '22' ; var accent33=p.accent + '33' ; var accent44=p.accent
        + '44' ; var accent66=p.accent + '66' ; var accent88=p.accent + '88' ; var ctaBg44=p.ctaBg + '44' ; var
        glassEl=isLightBg ? 'rgba(0,0,0,0.04)' : 'rgba(255,255,255,0.06)' ; var glassBorderEl=isLightBg
        ? 'rgba(0,0,0,0.08)' : 'rgba(255,255,255,0.08)' ; var salaryLabel=(themeName==='retro' || themeName==='sci-fi' )
        ? 'COMPENSATION' : 'Salary Range' ; %>
        <style>
            /* CSS Reset and Base Styles */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: <%- config.font || "sans-serif" %>;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                background: #0a0a0a;
                padding: 0;
            }

            .poster {
                width: 420px;
                height: 746px;
                position: relative;
                overflow: hidden;
                display: flex;
                flex-direction: column;
                background: linear-gradient(155deg, <%- p.bg1 %>, <%- p.bg2 %>);
                color: <%- p.text %>;
                box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
            }

            .poster__overlay {
                position: absolute;
                inset: 0;
                pointer-events: none;
                z-index: 1;
            }

            .poster__decor {
                position: absolute;
                inset: 0;
                pointer-events: none;
                z-index: 1;
            }

            .poster__content {
                position: relative;
                z-index: 2;
                display: flex;
                flex-direction: column;
                flex: 1;
                padding: 32px 28px 24px;
                overflow: hidden;
            }

            /* Components */
            .poster__header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 20px;
            }

            .poster__badge {
                display: inline-flex;
                align-items: center;
                gap: 6px;
                padding: 6px 14px;
                border-radius: 100px;
                font-size: .7rem;
                font-weight: 700;
                letter-spacing: 1.2px;
                text-transform: uppercase;
            }

            .poster__brand {
                font-size: .6rem;
                font-weight: 600;
                opacity: .4;
                letter-spacing: 2px;
                text-transform: uppercase;
            }

            .poster__company {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 20px;
                padding: 14px;
                border-radius: 14px;
            }

            .poster__avatar {
                width: 44px;
                height: 44px;
                border-radius: 10px;
                object-fit: cover;
                background: #fff;
                flex-shrink: 0;
            }

            .poster__company-info {
                min-width: 0;
                display: flex;
                flex-direction: column;
                gap: 2px;
            }

            .poster__name {
                font-size: .9rem;
                font-weight: 700;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .poster__location {
                font-size: .72rem;
                color: <%- p.textSub %>;
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .poster__title-wrap {
                flex: 1;
                display: flex;
                align-items: center;
                margin-bottom: 16px;
            }

            .poster__title {
                font-size: <%- titleSize %>;
                font-weight: 900;
                line-height: 1.15;
                letter-spacing: -0.02em;
            }

            .poster__tags {
                display: flex;
                flex-wrap: wrap;
                gap: 6px;
                margin-bottom: 16px;
            }

            .poster__tag {
                display: inline-flex;
                align-items: center;
                gap: 4px;
                padding: 4px 12px;
                border-radius: 100px;
                font-size: .68rem;
                font-weight: 600;
                color: <%- p.textSub %>;
            }

            .poster__salary {
                margin-bottom: 16px;
                padding: 12px 16px;
                border-radius: 12px;
            }

            .poster__salary-label {
                font-size: .6rem;
                font-weight: 600;
                letter-spacing: 1px;
                text-transform: uppercase;
                color: <%- p.textSub %>;
            }

            .poster__salary-value {
                font-size: 1.2rem;
                font-weight: 800;
                color: <%- p.accent %>;
            }

            .poster__cta-area {
                margin-top: auto;
            }

            .poster__cta {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                width: 100%;
                padding: 14px 20px;
                border: none;
                border-radius: 12px;
                font-size: .85rem;
                font-weight: 800;
                letter-spacing: .5px;
                text-transform: uppercase;
                text-decoration: none;
                background: <%- p.ctaBg %>;
                color: <%- p.ctaText %>;
                transition: all .2s;
            }

            .poster__cta:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
            }

            .poster__hashtags {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 12px;
                justify-content: center;
            }

            .poster__hashtags span {
                font-size: .62rem;
                font-weight: 500;
                opacity: .4;
            }

            /* THEMES */

            /* Glassmorphism */
            [data-theme="glassmorphism"] .poster__decor::before {
                content: '';
                position: absolute;
                width: 280px;
                height: 280px;
                border-radius: 50%;
                background: <%- p.accent %>;
                opacity: .15;
                filter: blur(80px);
                top: -70px;
                right: -70px;
            }

            [data-theme="glassmorphism"] .poster__badge {
                background: rgba(255, 255, 255, .12);
                border: 1px solid rgba(255, 255, 255, .2);
                backdrop-filter: blur(10px);
            }

            [data-theme="glassmorphism"] .poster__company {
                background: rgba(255, 255, 255, .08);
                border: 1px solid rgba(255, 255, 255, .12);
                backdrop-filter: blur(12px);
            }

            [data-theme="glassmorphism"] .poster__tag,
            [data-theme="glassmorphism"] .poster__salary {
                background: rgba(255, 255, 255, .08);
                border: 1px solid rgba(255, 255, 255, .12);
            }

            /* Neobrutalism */
            [data-theme="neobrutalism"] .poster {
                background: <%- p.bg1 %>;
            }

            [data-theme="neobrutalism"] .poster__badge {
                background: #fff;
                color: #000;
                border: 3px solid #000;
                box-shadow: 4px 4px 0 #000;
                border-radius: 0;
                transform: rotate(-2deg);
            }

            [data-theme="neobrutalism"] .poster__company,
            [data-theme="neobrutalism"] .poster__salary {
                background: #fff;
                color: #000;
                border: 3px solid #000;
                box-shadow: 6px 6px 0 #000;
                border-radius: 0;
            }

            [data-theme="neobrutalism"] .poster__title {
                border: 4px solid #000;
                background: #fff;
                color: #000;
                padding: 16px;
                box-shadow: 8px 8px 0 #000;
            }

            [data-theme="neobrutalism"] .poster__cta {
                border: 3px solid #000;
                box-shadow: 6px 6px 0 #000;
                border-radius: 0;
            }

            /* Minimalist */
            [data-theme="minimalist"] .poster__content {
                padding: 40px 32px 32px;
                justify-content: center;
            }

            [data-theme="minimalist"] .poster__badge {
                background: transparent;
                border: 1px solid <%- p.textSub %>;
                border-radius: 0;
            }

            [data-theme="minimalist"] .poster__company {
                border: none;
                border-bottom: 1px solid rgba(0, 0, 0, .08);
                border-radius: 0;
                padding: 8px 0;
            }

            [data-theme="minimalist"] .poster__salary {
                border: none;
                border-left: 3px solid <%- p.accent %>;
                border-radius: 0;
            }

            [data-theme="minimalist"] .poster__cta {
                border-radius: 0;
            }

            /* Retro */
            [data-theme="retro"] .poster {
                border: 2px solid <%- accent22 %>;
            }

            [data-theme="retro"] .poster__badge,
            [data-theme="retro"] .poster__company,
            [data-theme="retro"] .poster__salary {
                border: 1px solid <%- accent33 %>;
                border-radius: 0;
                background: transparent;
            }

            [data-theme="retro"] .poster__title {
                text-shadow: 0 0 10px <%- accent66 %>;
            }

            [data-theme="retro"] .poster__cta {
                border: 1px solid <%- p.accent %>;
                background: transparent;
                color: <%- p.accent %>;
                border-radius: 0;
                text-shadow: 0 0 8px <%- accent88 %>;
            }

            /* Sci-fi */
            [data-theme="sci-fi"] .poster__overlay {
                background-image: repeating-linear-gradient(0deg, transparent, transparent 49px, <%- accent11 %> 50px), repeating-linear-gradient(90deg, transparent, transparent 49px, <%- accent11 %> 50px);
            }

            [data-theme="sci-fi"] .poster__badge,
            [data-theme="sci-fi"] .poster__company,
            [data-theme="sci-fi"] .poster__salary {
                border: 1px solid <%- accent33 %>;
                border-radius: 0;
                background: transparent;
            }

            [data-theme="sci-fi"] .poster__title {
                text-shadow: 0 0 12px <%- accent44 %>;
            }

            [data-theme="sci-fi"] .poster__cta {
                border: 1px solid <%- p.accent %>;
                background: transparent;
                color: <%- p.accent %>;
                border-radius: 0;
                text-shadow: 0 0 6px <%- accent88 %>;
            }

            /* Monochrome */
            [data-theme="monochrome"] .poster {
                background: <%- p.bg1 %>;
                border: 8px solid <%- p.text %>;
            }

            [data-theme="monochrome"] .poster__badge {
                border: 2px solid <%- p.text %>;
                border-radius: 0;
            }

            [data-theme="monochrome"] .poster__cta {
                border-radius: 0;
                border: 2px solid <%- p.text %>;
            }

            [data-theme="monochrome"] .poster__title {
                text-transform: uppercase;
                font-weight: 900;
            }

            /* Pastel */
            [data-theme="pastel"] .poster {
                border-radius: 40px;
            }

            [data-theme="pastel"] .poster__company,
            [data-theme="pastel"] .poster__salary {
                background: rgba(255, 255, 255, 0.4);
                border: none;
                border-radius: 20px;
                backdrop-filter: blur(5px);
            }

            [data-theme="pastel"] .poster__cta {
                border-radius: 40px;
                box-shadow: 0 10px 20px <%- ctaBg44 %>;
            }

            /* Compact */
            [data-theme="compact"] .poster__content {
                padding: 20px;
                gap: 4px;
            }

            [data-theme="compact"] .poster__title {
                font-size: 1.6rem;
            }

            [data-theme="compact"] .poster__company {
                padding: 8px;
                margin-bottom: 10px;
                background: <%- glassEl %>;
            }

            [data-theme="compact"] .poster__header {
                margin-bottom: 10px;
            }

            /* Social / Tiktok Style */
            [data-theme="social"] .poster {
                background: #000;
            }

            [data-theme="social"] .poster__decor::before {
                content: '';
                position: absolute;
                inset: 0;
                background: radial-gradient(circle at 20% 30%, #ff0050 0%, transparent 40%), radial-gradient(circle at 80% 70%, #00f2ea 0%, transparent 40%);
                opacity: 0.2;
            }

            [data-theme="social"] .poster__title {
                font-weight: 900;
                text-transform: uppercase;
                letter-spacing: -2px;
            }

            [data-theme="social"] .poster__badge {
                background: #fe2c55;
                border: none;
            }

            [data-theme="social"] .poster__cta {
                background: #fe2c55;
                border-radius: 4px;
            }

            /* ===== LAYOUT: CENTERED ===== */
            [data-layout="centered"] .poster__content {
                justify-content: center;
                align-items: center;
                text-align: center;
                padding: 40px;
            }

            [data-layout="centered"] .poster__header {
                position: absolute;
                top: 32px;
                left: 0;
                right: 0;
                padding: 0 28px;
            }

            [data-layout="centered"] .poster__title-wrap {
                order: 1;
                flex: 0;
                margin-bottom: 20px;
            }

            [data-layout="centered"] .poster__company {
                order: 2;
                flex-direction: column;
                margin-bottom: 32px;
                background: transparent;
                border: none;
                box-shadow: none;
                padding: 0;
            }

            [data-layout="centered"] .poster__avatar {
                width: 72px;
                height: 72px;
                margin-bottom: 12px;
                border-radius: 50%;
            }

            [data-layout="centered"] .poster__cta-area {
                order: 3;
                margin-top: 0;
                width: 100%;
            }

            [data-layout="centered"] .poster__salary {
                order: 4;
                margin-top: 32px;
                background: <%- glassEl %>;
                width: 100%;
            }

            [data-layout="centered"] .poster__tags {
                order: 5;
                justify-content: center;
                margin-top: 16px;
            }

            /* ===== LAYOUT: SPOTLIGHT (Logo is Hero) ===== */
            [data-layout="spotlight"] .poster__content {
                justify-content: center;
                align-items: center;
            }

            [data-layout="spotlight"] .poster__header {
                position: absolute;
                top: 32px;
                left: 28px;
                right: 28px;
            }

            [data-layout="spotlight"] .poster__company {
                order: 1;
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 32px;
                flex: 0;
                margin-bottom: 24px;
                width: 100%;
                background: <%- glassEl %>;
                border: 1px solid <%- glassBorderEl %>;
            }

            [data-layout="spotlight"] .poster__avatar {
                width: 100px;
                height: 100px;
                margin-bottom: 16px;
                border-radius: 20px;
            }

            [data-layout="spotlight"] .poster__title-wrap {
                order: 2;
                flex: 0;
                margin-bottom: 24px;
                text-align: center;
            }

            [data-layout="spotlight"] .poster__cta-area {
                order: 3;
                width: 100%;
            }

            /* ===== LAYOUT: MODERN (Action in Middle) ===== */
            [data-layout="modern"] .poster__content {
                justify-content: space-between;
                padding: 40px 28px;
            }

            [data-layout="modern"] .poster__header {
                margin-bottom: 0;
            }

            [data-layout="modern"] .poster__title-wrap {
                order: 1;
                flex: 0;
                margin-top: 20px;
            }

            [data-layout="modern"] .poster__cta-area {
                order: 2;
                margin: 40px 0;
            }

            [data-layout="modern"] .poster__company {
                order: 3;
                margin-bottom: 0;
                background: transparent;
                border: none;
                border-top: 1px solid <%- glassBorderEl %>;
                border-radius: 0;
                padding: 20px 0;
            }

            [data-layout="modern"] .poster__salary {
                order: 4;
            }

            /* Responsive */
            @media(max-width:480px) {
                body {
                    background: transparent;
                }

                .poster {
                    width: 100vw;
                    height: 100vh;
                    box-shadow: none;
                    border-radius: 0;
                }
            }
        </style>
</head>

<body>
    <div class="poster" data-theme="<%- themeName %>" data-layout="<%- config.layout %>">
        <div class="poster__overlay"></div>
        <div class="poster__decor"></div>
        <div class="poster__content">

            <% if (show.badge) { %>
                <div class="poster__header">
                    <div class="poster__badge"><%- config.badgeText %></div>
                    <div class="poster__brand">TIKWORK</div>
                </div>
                <% } %>

                    <% if (show.logo || show.companyName) { %>
                        <div class="poster__company">
                            <% if (show.logo) { %>
                                <img src="<%- poster.companyLogo %>" class="poster__avatar"
                                    onerror="this.src='https://ui-avatars.com/api/?name=<%- encodeURIComponent(job.job_company_name) %>'">
                                <% } %>
                                    <div class="poster__company-info">
                                        <div class="poster__name"><%- job.job_company_name %></div>
                                        <% if (show.location) { %>
                                            <div class="poster__location"><i class="fas fa-map-marker-alt"></i> <%-
                                                    job.job_location %></div>
                                            <% } %>
                                    </div>
                        </div>
                        <% } %>

                            <div class="poster__title-wrap">
                                <h1 class="poster__title"><%- job.job_title %></h1>
                            </div>

                            <% if (show.tags) { %>
                                <div class="poster__tags">
                                    <span class="poster__tag"><i class="fas fa-briefcase"></i> <%- job.job_type
                                            %></span>
                                    <% poster.categories.slice(0, 2).forEach(function(cat) { %>
                                        <span class="poster__tag"><i class="fas fa-tag"></i> <%- cat %></span>
                                        <% }) %>
                                </div>
                                <% } %>

                                    <% if (show.salary && job.job_salary && job.job_salary !=='Hidden' && job.job_salary
                                        !=='N/A' ) { %>
                                        <div class="poster__salary">
                                            <div class="poster__salary-label"><%- salaryLabel %></div>
                                            <div class="poster__salary-value"><%- job.job_salary %></div>
                                        </div>
                                        <% } %>

                                            <div class="poster__cta-area">
                                                <a class="poster__cta" href="<%- job.job_link || '#' %>">
                                                    <span><%- config.ctaLabel %></span>
                                                    <i class="fas fa-arrow-right ml-2"></i>
                                                </a>
                                            </div>

                                            <% if (show.hashtags) { %>
                                                <div class="poster__hashtags">
                                                    <span>#hiring</span><span>#jobs</span><span>#tikwork</span>
                                                </div>
                                                <% } %>

        </div>
    </div>
</body>

</html>